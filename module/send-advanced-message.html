<script type='text/javascript'>
    RED.nodes.registerType('sendAdvancedMessage', {
        category: 'Discord-Drusilla',
        color: '#5662f6',
        icon: 'DiscordLogo.png',
        defaults: {
            name: {value: ''},
            connection: {value: '', type:'DiscordConnection'}
        },

        inputs: 1,
        outputs: 0,
        label: function() {
            return this.name||'sendAdvancedMessage'
        }
    })

</script>

<script type='text/html' data-template-name='sendAdvancedMessage'>
    <div class='form-row'>
        <label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
        <input type='text' id='node-input-name' placeholder='Name'>
    </div>
    <div class='form-row'>
        <label for='node-input-connection'><i class='fa fa-server'></i> Connection</label>
        <input id='node-input-connection'>
    </div>
<div>
    <p>This node is almost entirely controlled by msg-properties.</p>
</div>
</script>

<script type='text/html' data-help-name='sendAdvancedMessage'>
    <h1>THIS NODE IS DEPRECATED. USE sendSimpleMessage INSTEAD.</h1>
    <p>This is an advanced node for sending messages to discord. Almost all properties are set using msg-properties and this node also supports embeds.</p>

    <h3>Inputs</h3>
    <dl class='message-properties'>
        <dt>payload
            <span class='property-type'>string or object</span>
        </dt>
        <dd>The string or object(embed) to be sent</dd>

         <dt><code>msg.channelId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The channelId to send a message to</dd>

        <dt><code>msg.messageId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The messageId to reply to</dd>

        <dt><code>msg.embed</code>
            <span class='property-type'>boolean</span>
        </dt>
        <dd>Must be set to true if the message is supposed to be an embed</dd>

        <dt><code>msg.action</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Can be either 'send' or 'reply'. 'send' sends a message, 'reply' replies to a message</dd>

        <dt class='optional'><code>msg.discord.channelId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Alternative property often populated by other discord-nodes - The channelId to send a message to</dd>

        <dt class='optional'><code>msg.discord.messageId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Alternative property often populated by other discord-nodes - The message to reply to</dd>
    </dl>

    <h3>Details</h3>
    <p>This is an advanced node for sending messages to discord. Almost all properties are set using msg and this node also supports embeds.</p>
    <p>This is node will send or reply to a message. To send a message, the node needs an channelId and a message. To reply to a message, the node needs a messageId.</p>
    <p>The node will look for these properties in this order:</p>
    <dl>
        <dt>1. <code>msg.channelId</code> OR <code>msg.messageId</code> AND <code>msg.payload</code></dt>
        <dd>The payload contains the message to be sent.</dd>
        <dt>2. <code>msg.discord.channelId</code> OR <code>msg.discord.messageId</code> AND <code>msg.payload</code></dt>
        <dd>The payload contains the message to be sent.</dd>
    </dl>
</script>