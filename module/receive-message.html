<script type="text/javascript">
    RED.nodes.registerType('receiveMessage', {
        category: 'Discord-Drusilla',
        color: '#5662f6',
        icon: "DiscordLogo.png",
        defaults: {
            name: {value: ""},
            connection: {value: "", type:"DiscordConnection"},
            showStatus: {value: false}
        },
        inputs: 0,
        outputs: 1,
        label: function() {
            return this.name||"receiveMessage"
        }
    });

</script>

<script type="text/html" data-template-name="receiveMessage">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-connection"><i class="fa fa-server"></i> Connection</label>
        <input id="node-input-connection">
    </div>
    <div class="form-row">
        <p>Show the status of how many messages are preserved in memory</p>
    </div>
    <div class="form-row">
        <label for="node-input-showStatus"><i class="fa fa-tag"></i> Show status</label>
        <input type="checkbox" id="node-input-showStatus">
    </div>
</script>

<script type='text/html' data-help-name='receiveMessage'>
    <p>This node listens to all channels the bot has access to and returns the messages unless the message is from a bot</p>

    <h3>Outputs</h3>
    <dl class='message-properties'>
        <dt>payload
            <span class='property-type'>String</span>
        </dt>
        <dd>Contains the message sent</dd>

        <dt><code>msg.discord.message</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the message sent</dd>

        <dt><code>msg.discord.messageId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the id of the message sent</dd>

        <dt><code>msg.discord.guildName</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the name of the guild where the message was sent</dd>

        <dt><code>msg.discord.guildId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the id of the guild where the message was sent</dd>

        <dt><code>msg.discord.memberId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the id of the member that sent the message</dd>

        <dt><code>msg.discord.username</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Contains the username of the member that sent the message</dd>

    </dl>

    <h3>Details</h3>
    <p>This node listens to all channels the bot has access to and returns the messages unless the message is from a bot. The node inserts the message into the payload, but also creates <code>msg.discord</code> that stores relevant information.</p>
    <p>For advanced users, i will also inform that this temporary saves the discord-object in memory for 10 seconds after it's received. This so the node can reuse the object when replying to messages etc.</p>
</script>