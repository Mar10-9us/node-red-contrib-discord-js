<script type="text/javascript">
    RED.nodes.registerType('getRole', {
        category: 'Communication',
        color: '#5662F6',
        icon: 'DiscordLogo.png',
        defaults: {
            name: {value: ''},
            connection: {value: "", type:"DiscordConnection"},
            memberId: {value: ''},
            guildId: {value: ''}
        },

        inputs: 1,
        outputs: 1,
        label: function () {
            return this.name || 'getRole'
        }
    })
</script>

<script type='text/html' data-template-name='getRole'>
    <div class='form-row'>
        <label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
        <input type='text' id='node-input-name'>
    </div>
    <div class="form-row">
        <label for="node-input-connection"><i class="fa fa-server"></i> Connection</label>
        <input id="node-input-connection">
    </div>
    <div class='form-row'>
        <label for='node-input-memberId'><i class='fa fa-user'></i> User id</label>
        <input type='text' id='node-input-memberId'>
    </div>
    <div class='form-row'>
        <label for='node-input-guildId'><i class='fa fa-users'></i> Guild id</label>
        <input type='text' id='node-input-guildId'>
    </div>
</script>

<script type='text/html' data-help-name='getRole'>
    <p>This node gets all the roles of the specified user on the specified guild(server)</p>

    <h3>Inputs</h3>
    <dl class='message-properties'>
        <dt>msg.memberId
            <span class='property-type'>string</span>
        </dt>
        <dd>The id of the member you want to fetch the roles for</dd>

        <dt><code>msg.guildId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The guild id where the user recides</dd>

        <dt class='optional'><code>msg.discord.memberId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The id of the member you want to fetch the roles for</dd>

        <dt class='optional'><code>msg.discord.guildId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The guild id where the user recides</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class='message-properties'>
        <dt>payload
            <span class='property-type'>Array</span>
        </dt>
        <dd>An array of role names</dd>

        <dt><code>msg.discord</code>
            <span class='property-type'>object</span>
        </dt>
        <dd>
            An object which contains roles, guildId, guildName, memberId & username. 
        </dd>

    </dl>

    <h3>Details</h3>
    <p>This node will try to get the roles of the specified user in the specified guild. To be able to fetch the roles, the node needs both an memberId and an guildId. The node will look for these properties in this order:</p>
    <dl>
        <dt>1. <code>msg.memberId & msg.guildId</code></dt>
        <dt>2. <code>node-properties</code></dt>
        <dd>If you specify the properties in the nodes config</dd>
        <dt>3. <code>msg.discord</code></dt>
        <dd>msg.discord.memberId & msg.discord.guildId</dd>
    </dl>
</script>