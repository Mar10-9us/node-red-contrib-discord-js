<script type='text/javascript'>
    RED.nodes.registerType('sendSimpleMessage', {
        category: 'Discord-Drusilla',
        color: '#5662f6',
        icon: 'DiscordLogo.png',
        defaults: {
            name: {
                value: ''
            },
            connection: {
                value: '',
                type: 'DiscordConnection'
            },
            action: {
                value: ''
            },
            channelId: {
                value: ''
            },
            messageId: {
                value: ''
            },
            message: {
                value: ''
            },
            embed: {
                value: false
            }
        },

        inputs: 1,
        outputs: 0,
        label: function () {
            return this.name || 'sendMessage'
        }
    })
</script>

<script type='text/html' data-template-name='sendSimpleMessage'>
    <div class='form-row'>
        <label for='node-input-name'><i class='fa fa-tag'></i> Name</label>
        <input type='text' id='node-input-name' placeholder='Name'>
    </div>
    <div class='form-row'>
        <label for='node-input-connection'><i class='fa fa-server'></i> Connection</label>
        <input id='node-input-connection'>
    </div>
    <div class='form-row'>
        <label for='node-input-action'><i class='fa fa-reply'></i> Action</label>
        <select id='node-input-action'>
            <option value='send'>Send to channel</option>
            <option value='reply'>Reply to message</option>
            <option value='edit'>Edit a message</option>
        </select>
    </div>
    <div class='form-row'>
        <label for='node-input-channelId'><i class='fa fa-tag'></i> Channel Id</label>
        <input id='node-input-channelId'>
    </div>
    <div class='form-row'>
        <label for='node-input-messageId'><i class='fa fa-tag'></i> Message Id</label>
        <input id='node-input-messageId'>
    </div>
    <div class='form-row'>
        <label for='node-input-message'><i class='fa fa-tag'></i> Message</label>
        <input id='node-input-message'>
    </div>
    <div class='form-row'>
        <label for='node-input-embed'><i class='fa fa-tag'></i> Embed?</label>
        <input type='checkbox' id='node-input-embed'>
    </div>
</script>

<script type='text/html' data-help-name='sendSimpleMessage'>
    <p>This node can send, edit and reply to messages</p>

    <h3>Inputs</h3>
    <dl class='message-properties'>
        <dt>payload
            <span class='property-type'>string | object</span>
        </dt>
        <dd>The message to be sent</dd>

        <dt><code>msg.channelId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The channelId to send a message to</dd>

        <dt><code>msg.messageId</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>The message to reply to</dd>

        <dt><code>msg.action</code>
            <span class='property-type'>string</span>
        </dt>
        <dd>Can be either 'send', 'reply' or 'edit'</dd>

        <dt><code>msg.embed</code>
            <span class='property-type'>boolean</span>
        </dt>
        <dd>Can be either true or false. False is standard.</dd>
    </dl>

    <h3>Details</h3>
    <p>This node will send, edit or reply to a message. If the message sent to this node originates from a
        <code>receiveMessage</code>-node, this node will gather the necessary information automatically, and all you
        have to do is edit the <code>msg.payload</code> to specify what text you want to send.</p>
    <p>If the message does not originate from a <code>receiveMessage</code>-node, you have to provide the node with the
        necessary properties to be able to send/reply to/edit messages. To send a message, the node needs a channelId,
        and a message(text). To reply or edit a message, the node needs a channelId, messageId and a message(text)</p>
    <p>There is currently three ways to set the needed properties, and the node wil look for these in this order:</p>
    <p> (1) properties directly under <code>msg.</code> > (2) node configuration > (3) properties under <code>msg.discord.</code>
    </p>
    <dl>
        <dt>1. <code>Properties directly under msg.</code></dt>
        <dd><code>msg.action, msg.channelId, msg.messageId, msg.embed</code></dd>
        <dt>2. <code>node configuration</code></dt>
        <dd>Specify the settings by double clicking on the node and setting the the properties directly</dd>
        <dt>3. <code>properties under msg.discord</code></dt>
        <dd>generated by other discord-nodes, for example the receiveMessage-node. Will contain channelId, messageId etc.</dd>
    </dl>
</script>